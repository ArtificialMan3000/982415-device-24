var link=document.querySelector(".feedback-link"),modal=document.querySelector(".modal-feedback"),close=modal.querySelector(".modal-close"),form=modal.querySelector("form"),username=modal.querySelector("[name=feedback-name]"),email=modal.querySelector("[name=feedback-email]"),text=modal.querySelector("[name=feedback-text]"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("feedback-name"),storageEmail=localStorage.getItem("feedback-email")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),storageName&&storageEmail?(username.value=storageName,email.value=storageEmail,text.focus()):storageName?(username.value=storageName,email.focus()):(storageEmail&&(email.value=storageEmail),username.focus())}),close.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show"),modal.classList.remove("modal-error")}),form.addEventListener("submit",function(e){text.value?isStorageSupport&&(localStorage.setItem("feedback-name",username.value),localStorage.setItem("feedback-email",email.value),localStorage.setItem("feedback-text",text.value)):(e.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error"),text.classList.add("input-invalid"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modal.classList.contains("modal-show")&&(modal.classList.remove("modal-show"),modal.classList.remove("modal-error")))});var mapLink=document.querySelector(".contacts-map-link"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal-close");function init(){var e=new ymaps.Map("map",{center:[59.938631,30.327055],zoom:15});e.controls.remove("searchControl"),e.controls.remove("trafficControl"),e.controls.remove("typeSelector"),e.controls.remove("fullscreenControl");var a=new ymaps.Placemark([59.938631,30.323055],{balloonContentHeader:"Device",balloonContentBody:"г. Москва, ул. Строителей, 15 ",balloonContentFooter:"+7 (495) 495-95-95",hintContent:"Device"});e.geoObjects.add(a)}mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapPopup.classList.contains("modal-show")&&mapPopup.classList.remove("modal-show"))}),ymaps.ready(init);
